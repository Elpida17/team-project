<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>Σύνδεση</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="login-container">
        <h2>Σύνδεση</h2>
        
        <form id="loginForm">
			<input type="text" id="afm" placeholder="ΑΦΜ" inputmode="numeric" required>
            <input type="password" id="password" placeholder="Κωδικός Πρόσβασης" required>
            <button type="submit">Είσοδος</button>
        </form>

        <div class="links">
            <a href="citizenRegister.html">Εγγραφή Πολίτη</a>
            <a href="storeRegister.html">Εγγραφή Καταστήματος</a>
        </div>
    </div>
	
	<script>
	        function addStore() {
	            // Φτιάχνουμε το αντικείμενο JSON όπως το περιμένει το DTO 
	            var storeData = {
	                "afm": parseInt(document.getElementById("afm").value),
	                "shopName": document.getElementById("shopName").value,
	                "owner": document.getElementById("owner").value,
	                "password": document.getElementById("password").value
	            };

	            var settings = {
	                "url": "http://localhost:8080/storeRegister",
	                "method": "POST", // Χρησιμοποιούμε POST γιατί έτσι το ορίσαμε στον Controller
	                "timeout": 0,
	                "headers": {
	                    "Content-Type": "application/json"
	                },
	                "data": JSON.stringify(storeData) // Μετατρέπουμε το αντικείμενο σε κείμενο JSON
	            };

	            // Η κλήση AJAX της jQuery
	            $.ajax(settings).done(function (response) {
	                alert(response); // Εμφανίζει το μήνυμα "Το κατάστημα δημιουργήθηκε επιτυχώς!"
	                window.location.href = "login.html"; // Επιστροφή στη σύνδεση
	            }).fail(function (jqXHR) {
	                alert("Σφάλμα: " + jqXHR.responseText);
	            });
	        }
	    </script>

</body>
</html>