<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>Σύνδεση</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="login-container">
        <h2>Σύνδεση</h2>
        
        <form id="loginForm">
			<label> ΑΦΜ: <input type="text" id="afm" inputmode="numeric" required> </label>
            <label> Password: <input type="password" id="password" required> </label>
            <button type="submit">Είσοδος</button>
        </form>

        <nav>
            <a href="citizenRegister.html">Εγγραφή Πολίτη</a> <br>
            <a href="storeRegister.html">Εγγραφή Καταστήματος</a>
        </nav>
    </div>
	
	<script>
	        function addStore() {
	            var storeData = {
	                "afm": parseInt(document.getElementById("afm").value),
	                "shopName": document.getElementById("shopName").value,
	                "owner": document.getElementById("owner").value,
	                "password": document.getElementById("password").value
	            };

	            var settings = {
	                "url": "http://localhost:8080/storeRegister",
	                "method": "POST", // Χρησιμοποιούμε POST γιατί έτσι το ορίσαμε στον Controller
	                "timeout": 0,
	                "headers": {
	                    "Content-Type": "application/json"
	                },
	                "data": JSON.stringify(storeData) // Μετατρέπουμε το αντικείμενο σε κείμενο JSON
	            };

	            // Η κλήση AJAX της jQuery
	            $.ajax(settings).done(function (response) {
	                alert(response); 
	                window.location.href = "login.html"; // Επιστροφή στη σύνδεση
	            }).fail(function (jqXHR) {
	                alert("Σφάλμα: " + jqXHR.responseText);
	            });
	        }
	    </script>

</body>
</html>