<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>Προσθήκη Προϊόντος</title>
	<link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

    <div class="container">
        <h2>Προσθήκη Νέου Προϊόντος</h2>
        
        <form id="addProductForm">
            <label>ΑΦΜ Καταστήματος: 
                <input type="number" id="storeAfm" required>
            </label>
            
            <label>Τύπος Προϊόντος: 
                <input type="text" id="type" required>
            </label>
            
            <label>Μάρκα: 
                <input type="text" id="brand" required>
            </label>
            
            <label>Τιμή: 
                <input type="number" step="0.01" id="price" required>
            </label>
            
            <label>Περιγραφή: 
                <textarea id="description"></textarea>
            </label>
            
            <label>Αριθμός Προϊόντων: 
                <input type="number" id="numberOfProducts" value="1" min="1" required>
            </label>
            
            <button type="button" onclick="addProduct()">Προσθήκη Προϊόντος</button>
        </form>
        
        <div id="message"></div>
    </div>

    <script>
    function addProduct() {
        var storeAfm = parseInt(document.getElementById("storeAfm").value);
        
        if (isNaN(storeAfm)) {
            alert("Παρακαλώ εισάγετε έγκυρο ΑΦΜ καταστήματος");
            return;
        }

        var productData = {
            type: document.getElementById("type").value,
            brand: document.getElementById("brand").value,
            price: parseFloat(document.getElementById("price").value),
            description: document.getElementById("description").value,
            numberOfProducts: parseInt(document.getElementById("numberOfProducts").value)
        };

        var url = "http://localhost:8080/store/" + storeAfm + "/addProduct";

        $.ajax({
            url: url, 
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(productData),  
            success: function(response) {
                document.getElementById("message").innerHTML = 
                    "<p style='color:green;'>" + response + "</p>";
                document.getElementById("addProductForm").reset();
            },
            error: function(jqXHR) {
                document.getElementById("message").innerHTML = 
                    "<p style='color:red;'>Σφάλμα: " + 
                    (jqXHR.responseText || "Αποτυχία προσθήκης") + "</p>";
            }
        });
    }
    </script>

</body>
</html>